<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/static/bootstrap/css/bootstrap-theme.min.css" />
        <link rel="stylesheet" href="/static/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" />
        <script src="/static/js/jquery-1.10.2.min.js"></script>
        <script src="/static/js/vue.js"></script>
        <script src="/static/js/global-config.js"></script>
        <script src="/static/bootstrap/js/bootstrap.min.js"></script>
        <script src="/static/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
        <style>
            .my-btn {
                margin-left: 10px;
            }
        </style>
    </head>
    <body>
        <div class="container" style="margin-top: 20px;">
            <div class="btn-group-lg" id="btn-column">
                <button class="btn btn-deafult my-btn" v-for="column in columnList" v-bind:value="column.value">{{column.content}}</button>
            </div>

            <table class="table table-striped table-hover" style="margin-top: 20px; font-size: 70px;" id="main-table">
                <tr v-for="row in rowList">
                    <td>{{row.list[0]}}</td>
                    <td>{{row.list[1]}}</td>
                    <td>{{row.list[2]}}</td>
                    <td>{{row.list[3]}}</td>
                    <td>{{row.list[4]}}</td>
                </tr>
            </table>

        </div>
    </body>
    <script>
        $(document).ready(function() {
            listSyllabaryByRow(0);
        });
        var appBtn = new Vue({
            el: '#btn-column',
            data: {
                columnList: [{
                    value: 0,
                    content: 'a'
                }, {
                    value: 1,
                    content: 'k'
                }]
            }
        });
        var tableApp = new Vue({
            el: '#main-table',
            data: {
                rowList: []
            }
        });
        $(".my-btn").click(function(e) {
            var row = $(this).attr("value");
            listSyllabaryByRow(row);
        });

        function listSyllabaryByRow(row) {
            $.ajax(baseUrl + 'api/v1/listSyllabaryByRow', {
                data: {
                    row: row
                },
                dataType: 'json', //服务器返回json格式数据
                type: 'GET', //HTTP请求类型
                beforeSend: function(request) {
                    request.setRequestHeader("token", window.localStorage.getItem(
                        "token"));
                },
                timeout: 10000, //超时时间设置为10秒；
                success: function(data) {
                    console.log(data);
                    if (data.code == 200) {
                        var arrayList = data.data;
                        console.log(arrayList);
                        createList(arrayList);
                    } else {
                        loginPage();
                    }
                },
                error: function(xhr, type, errorThrown) {

                }
            });
        }

        function createList(arrayList) {
            var length = arrayList.length;
            var list = [];
            for (var i = 0; i < length; i++) {
                list.push(arrayList[i].hiragana);
            }
            changeList(list);
        }

        function changeList(listA) {
            var listB = [];
            var length = listA.length
            var a = listA;
            for (var k = 0; k < length; k++) {
                for (var i = length - 1; i > 0; i--) {
                    var b = a[i - 1];
                    a[i - 1] = a[i];
                    a[i] = b;
                    listB.push({
                        list: JSON.parse(JSON.stringify(a))
                    });
                }
            }
            rand(listB);
            tableApp.$data.rowList = listB;
        }

        function rand(arr) {
            var length = arr.length;
            for (var i = arr.length - 1; i > 0; i--) {
                var randomIndex = Math.floor(Math.random() * (i + 1));
                var itemIndex = arr[randomIndex];
                arr[randomIndex] = arr[i];
                arr[i] = itemIndex;
            }
            return arr;
        }
    </script>
</html>
